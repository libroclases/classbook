

<div class="container-fluid" style="padding-left: 5%; padding-right: 5%; padding-top: 1%;padding-bottom: 0%"
[style.background-color]="bodybgcolor" [style.minHeight] = "height">

<div  style="float: right; padding-bottom: 0%; height:100px; ">
    <multi-select
      [tables]="selTables"
  
      [ignore-FK-requirements]="ignoreFkRequirements"
      [change-functions]="changeFnsArray"
      [patch-fks-from-storage]="patchFKsFromStorage">
    </multi-select>
    </div>

    <div  class="overflow-auto p-3 bg-light"  [style.max-height]="height" style="width: 100%;">

        <!--form  [formGroup]="notasForm"-->
        
        <table *ngIf="showtable" class="table table-bordered table-hover">
    
          <tbody  *ngIf="asignatura$">
            <tr><th  [attr.colspan]="numcols" [style.background-color]="tablehead" style="text-align: center;color:white; height:40px" ><em [class]="getBiClass('/nota')">&nbsp;&nbsp;</em>Notas</th></tr>
            <tr><th style="text-align: center">&nbsp;</th><td *ngFor="let e of (asignatura$ | async)">
              </td><td></td></tr>
            <tr><th style="text-align: center">&nbsp;</th><td *ngFor="let e of (asignatura$ | async)">
              <a *ngIf="edita==true && asignaturaEdit == e.id; else cerrado" class="btn btn-link btn-sm px-3" ><em class="bi bi-unlock"></em></a>
              <ng-template #cerrado>><em class="bi bi-lock"></em></ng-template></td><td>{{ponderacion}}%</td>
            </tr>
            <tr *ngFor="let m of (matricula$ | async)">
    
              <td style="width: 30%; text-align: left">{{m.nombre}}</td>
              <td  *ngFor="let nota of (matriculaNotaMap.get(m.id) | async)">
                    
              
                <ng-template #mostra_nota><span [style.color]="colorNota(nota.nota)">{{nota.nota  | number:'1.1-1'}}</span></ng-template>
              <td>
                <b *ngIf="ponderacion==100" [style.color]="getPromedioMatricula(m.id)[1]">{{ getPromedioMatricula(m.id)[0] | number:'1.1-1'}}</b>
              </td>
    
            </tr>
            <tr>
            <td>&nbsp;</td><td *ngFor="let e of (asignatura$ | async)">
              <span>
                <b *ngIf="ponderacion==100"  [style.color]="getSumAsignatura(e.id)[1]">{{ getSumAsignatura(e.id)[0]  | number:'1.1-1' }}</b>
              </span>
            </td>
               <td *ngIf="ponderacion==100"><b  [style.color]="sumPromedioMatricula()[1]">{{sumPromedioMatricula()[0] |  number:'1.1-1' }}</b></td>
            </tr>
    
          </tbody>
        </table>
    
        <!--/form-->
    
      </div>


</div>
 


